---
import Layout from '../layouts/Layout.astro';
import Dashboard from '../components/dashboard';
import Edituser from '../components/edituser.jsx';

//EL CODIGO ESTE LO HE TENIDO QUE HACER CON UNA INTERFAZ PUESTO QUE ME DABA FALLOS A LA HORA DE RECOGER LOS DATOS DE LA API
//Si podéis averiguar otra forma más sencilla mejor
interface User {
  name: string;
  username: string;
}

let nombre: string[] = [];
let apellidos: string[] = [];

try {
  const response = await fetch("https://jsonplaceholder.typicode.com/users/");

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  const data: User[] = await response.json();

  // Usar map para obtener los nombres y apellidos
  nombre = data.map(user => user.name);
  apellidos = data.map(user => user.username);

} catch (error) {
  console.error("Error al obtener los datos del usuario:", error);
}
---

<Layout title="Modificar Usuarios">
  <div class="flex flex-row">
    <Dashboard />

    <!--Le pasamos a el componente EditUser el nombre y apellidos como array los cuales contienen la info de la api-->
    <Edituser nombre={nombre} apellidos={apellidos} />
  </div>
</Layout>
